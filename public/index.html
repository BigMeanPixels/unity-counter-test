<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unity Counter Test</title>
  <style>
    body { font-family: system-ui, sans-serif; background:#111; color:#fff; margin:0; display:flex; min-height:100vh; align-items:center; justify-content:center; }
    .wrap { width:min(520px, 92vw); text-align:center; }
    button { width:100%; padding:20px; font-size:24px; border-radius:16px; border:none; cursor:pointer; }
    .small { opacity:0.85; margin-top:12px; }
    .count { font-size:48px; margin:18px 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Click to Increment</h1>
    <div class="count" id="count">0</div>
    <button id="btn">+1</button>
    <div class="small" id="status">Connectingâ€¦</div>
  </div>

<script>
  const countEl = document.getElementById("count");
  const statusEl = document.getElementById("status");
  const btn = document.getElementById("btn");

  const wsProto = location.protocol === "https:" ? "wss://" : "ws://";
  const ws = new WebSocket(wsProto + location.host);

  ws.onopen = () => statusEl.textContent = "Connected";
  ws.onclose = () => statusEl.textContent = "Disconnected";
  ws.onerror = () => statusEl.textContent = "Error";

  ws.onmessage = (ev) => {
    const msg = JSON.parse(ev.data);
    if (msg.type === "state") countEl.textContent = msg.count;
  };

  btn.onclick = () => {
    ws.send(JSON.stringify({ type: "increment" }));
  };
</script>
</body>
</html>
